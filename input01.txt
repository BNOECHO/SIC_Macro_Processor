COPY	START	0
RDBUFF	MACRO	&INDEV=F1,&BUFADR=,&RECLTH=,&EOR=08,&MAXLTH=2048
	IF	(&EOR NE '')
&EORCK	SET	1
	ENDIF
	CLEAR	X
	CLEAR	A
	IF	(&EORCK EQ 1)
	LDCH	=X'&EOR'
	RMO	A,S
	ENDIF
	+LDT	#&MAXLTH
$LOOP	TD	=X'&INDEV'
	JEQ	$LOOP
	RD	=X'&INDEV'
	IF	(&EORCK EQ 1)
	COMPR	A,S
	JEQ	$EXIT
	ENDIF
	STCH	&BUFADR,X
	TIXR	T
	JLT	$LOOP
$EXIT	STX	&RECLTH
	MEND

FIRST	STL	RETADR
CLOOP	RDBUFF	F1,BUFFER,LENGTH
	LDA	LENGTH
	COMP	#0
	JEQ	ENDFIL
	J	CLOOP
ENDFIL	J	@RETADER
EOF	BYTE	C'EOF'
THREE	WORD	3
RETADR	RESW	1
LENGTH	RESW	1
BUFFER	RESB	2048
	END	FIRST